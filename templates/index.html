{% extends "base.html" %}

{% block title %}Cat치logo de Productos{% endblock %}

{% block content %}
    
    <h2 class="catalog-title">游댠 Los M치s Vendidos</h2>

    <div class="product-grid">
        
        {% for p in productos %}
        <div class="product-card">
            
            <div class="product-image-placeholder">
                <i class="fas fa-camera" style="font-size: 30px;"></i>
                <br>AQU칈 VA IMAGEN
            </div>
            
            <div class="product-info">
                <h3 class="product-title">{{ p.nombre | default("Nombre del Producto", true) }}</h3>
                <p class="product-brand">Marca: **{{ p.marca | default("Marca Desconocida", true) }}**</p>
                
                <p class="product-description">
                    {{ p.descripcion | default("Descripci칩n breve del producto.", true) }}
                </p>

                <div class="product-pricing">
                    <p class="product-price">${{ "{:,.2f}".format(p.precio) | default("0.00", true) }}</p>
                    
                    {% set stock_class = "stock-out" %}
                    {% if p.stock > 10 %}
                        {% set stock_class = "stock-available" %}
                    {% elif p.stock > 0 %}
                        {% set stock_class = "stock-low" %}
                    {% endif %}
                    
                    <p class="product-details {{ stock_class }}">
                        Stock: {% if p.stock > 0 %} Disponible ({{ p.stock }}) {% else %} 춰Agotado! {% endif %}
                    </p>
                </div>

                <div class="product-details-extra">
                    <p>Color: {{ p.color | default("Varios", true) }}</p> 
                    <p>Talla: **{{ p.talla | default("-", true) }}**</p> 
                </div>

                <div class="product-actions">
                    <form action="{{ url_for('add_cart') }}" method="POST" class="add-to-cart-form">
                        <input type="hidden" name="id_producto" value="{{ p.id_producto }}">
                        <input type="hidden" name="cantidad" value="1"> 
                        <button type="submit" class="btn-primary" {% if p.stock == 0 %} disabled {% endif %}>
                            <i class="fas fa-shopping-cart"></i> Agregar
                        </button>
                    </form>

                    <button class="btn-secondary" {% if p.stock == 0 %} disabled {% endif %}>
                        <i class="fas fa-calendar-check"></i> Reservar
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
        
        {% if not productos %}
        <div class="no-products-message">
            <h3>No hay productos disponibles en el cat치logo en este momento.</h3>
            <p>Revisa la conexi칩n a la base de datos o a침ade nuevos productos.</p>
        </div>
        {% endif %}
        
    </div>

{% endblock %}
